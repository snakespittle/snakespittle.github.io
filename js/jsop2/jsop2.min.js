"use strict";function setBounds(e,n,t,i,o){e.style.left=n+"px",e.style.top=t+"px",e.style.width=i+"px",e.style.height=o+"px"}function hintHide(){setBounds(ghostpane,b.left,b.top,b.width,b.height),ghostpane.style.opacity=0}function onTouchDown(e){onDown(e.touches[0]),e.preventDefault()}function onTouchMove(e){onMove(e.touches[0])}function onTouchEnd(e){0==e.touches.length&&onUp(e.changedTouches[0])}function onMouseDown(e){onDown(e),(clicked.onTopEdge||clicked.onRightEdge||clicked.onLeftEdge||clicked.onBottomEdge||clicked.isResizing||clicked.isMoving)&&e.preventDefault()}function onDown(e){calc(e);var n=onRightEdge||onBottomEdge||onTopEdge||onLeftEdge;clicked={x:x,y:y,cx:e.clientX,cy:e.clientY,w:b.width,h:b.height,isResizing:n,isMoving:!n&&canMove(),onTopEdge:onTopEdge,onLeftEdge:onLeftEdge,onRightEdge:onRightEdge,onBottomEdge:onBottomEdge}}function canMove(){return x>0&&x<b.width&&y>0&&y<b.height&&y<30}function calc(e){b=pane.getBoundingClientRect(),x=e.clientX-b.left,y=e.clientY-b.top,onTopEdge=y<EDGE_MARGINS,onLeftEdge=x<EDGE_MARGINS,onRightEdge=x>=b.width-EDGE_MARGINS,onBottomEdge=y>=b.height-EDGE_MARGINS,rightScreenEdge=window.innerWidth-MARGINS,bottomScreenEdge=window.innerHeight-MARGINS}function onMove(n){calc(n),e=n,redraw=!0}function animate(){if(requestAnimationFrame(animate),redraw){if(redraw=!1,clicked&&clicked.isResizing){if(clicked.onRightEdge&&(pane.style.width=Math.max(x,minWidth)+"px"),clicked.onBottomEdge&&(pane.style.height=Math.max(y,minHeight)+"px"),clicked.onLeftEdge){var n=Math.max(clicked.cx-e.clientX+clicked.w,minWidth);n>minWidth&&(pane.style.width=n+"px",pane.style.left=e.clientX+"px")}if(clicked.onTopEdge){var t=Math.max(clicked.cy-e.clientY+clicked.h,minHeight);t>minHeight&&(pane.style.height=t+"px",pane.style.top=e.clientY+"px")}return void hintHide()}return clicked&&clicked.isMoving?(b.top<FULLSCREEN_MARGINS||b.left<FULLSCREEN_MARGINS||b.right>window.innerWidth-FULLSCREEN_MARGINS||b.bottom>window.innerHeight-FULLSCREEN_MARGINS?(setBounds(ghostpane,0,0,window.innerWidth,window.innerHeight),ghostpane.style.opacity=.2):b.top<MARGINS?(setBounds(ghostpane,0,0,window.innerWidth,window.innerHeight/2),ghostpane.style.opacity=.2):b.left<MARGINS?(setBounds(ghostpane,0,0,window.innerWidth/2,window.innerHeight),ghostpane.style.opacity=.2):b.right>rightScreenEdge?(setBounds(ghostpane,window.innerWidth/2,0,window.innerWidth/2,window.innerHeight),ghostpane.style.opacity=.2):b.bottom>bottomScreenEdge?(setBounds(ghostpane,0,window.innerHeight/2,window.innerWidth,window.innerWidth/2),ghostpane.style.opacity=.2):hintHide(),preSnapped?void setBounds(pane,e.clientX-preSnapped.width/2,e.clientY-Math.min(clicked.y,preSnapped.height),preSnapped.width,preSnapped.height):(pane.style.top=e.clientY-clicked.y+"px",void(pane.style.left=e.clientX-clicked.x+"px"))):void(onRightEdge&&onBottomEdge||onLeftEdge&&onTopEdge?pane.style.cursor="nwse-resize":onRightEdge&&onTopEdge||onBottomEdge&&onLeftEdge?pane.style.cursor="nesw-resize":onRightEdge||onLeftEdge?pane.style.cursor="ew-resize":onBottomEdge||onTopEdge?pane.style.cursor="ns-resize":canMove()?pane.style.cursor="move":pane.style.cursor="inherit")}}function onUp(e){if(calc(e),clicked&&clicked.isMoving){var n={width:b.width,height:b.height};b.top<FULLSCREEN_MARGINS||b.left<FULLSCREEN_MARGINS||b.right>window.innerWidth-FULLSCREEN_MARGINS||b.bottom>window.innerHeight-FULLSCREEN_MARGINS?(setBounds(pane,0,0,window.innerWidth,window.innerHeight),preSnapped=n):b.top<MARGINS?(setBounds(pane,0,0,window.innerWidth,window.innerHeight/2),preSnapped=n):b.left<MARGINS?(setBounds(pane,0,0,window.innerWidth/2,window.innerHeight),preSnapped=n):b.right>rightScreenEdge?(setBounds(pane,window.innerWidth/2,0,window.innerWidth/2,window.innerHeight),preSnapped=n):b.bottom>bottomScreenEdge?(setBounds(pane,0,window.innerHeight/2,window.innerWidth,window.innerWidth/2),preSnapped=n):preSnapped=null,hintHide()}clicked=null}var minWidth=60,minHeight=40,FULLSCREEN_MARGINS=-50,MARGINS=20,EDGE_MARGINS=7,clicked=null,onRightEdge,onBottomEdge,onLeftEdge,onTopEdge,rightScreenEdge,bottomScreenEdge,preSnapped,b,x,y,redraw=!1,pane=document.getElementById("jsop"),ghostpane=document.getElementById("jsop_ghost");pane.addEventListener("mousedown",onMouseDown),document.addEventListener("mousemove",onMove),document.addEventListener("mouseup",onUp),pane.addEventListener("touchstart",onTouchDown),document.addEventListener("touchmove",onTouchMove),document.addEventListener("touchend",onTouchEnd);var e;animate(),function(e){window.JSOP={documentReady:function(){var n="https://snakespittle.github.io/js/jsonview/jquery.json-view.min.js?hide_ajax_loader=true";e.getScript(n,function(){JSOP.initJSOP()})},initJSOP:function(){var n="https://snakespittle.github.io/js/jsonview/jquery.json-view.min.css?v=1.32",t="https://snakespittle.github.io/js/jsop2/jsop2.min.css?v=1.33";if(e("#jsop").length>0){var i=e('<div id="jsop_header">JSOP2 Backstage Pass</div>'),o=e('<div id="jsop_content"><div id="pretty_tree"></div></div>');e("#jsop").append(i),e("#jsop").append(o),document.createStyleSheet?(document.createStyleSheet(n),document.createStyleSheet(t)):(e("head").append(e("<link rel='stylesheet' href='"+n+"' type='text/css' media='screen' />")),e("head").append(e("<link rel='stylesheet' href='"+t+"' type='text/css' media='screen' />")))}JSOP.prettyTree(window.json_to_prettify)},prettyTree:function(n){Object.keys(n).length>0&&e("#pretty_tree").jsonView(n)}},e(document).ready(function(){e("#jsop").length>0&&JSOP.documentReady()})}(jQuery);
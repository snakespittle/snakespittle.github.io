!function(e){"use strict";var n=function(n){var p=e("<span />",{class:"collapser",on:{click:function(){var n=e(this);n.toggleClass("collapsed");var p=n.parent().children(".block"),a=p.children("ul");n.hasClass("collapsed")?(a.hide(),p.children(".dots, .comments").show()):(a.show(),p.children(".dots, .comments").hide())}}});return n&&p.addClass("collapsed"),p},p=function(p,a){var l=e.extend({},{nl2br:!0},a),s=function(e){return e.toString()?e.toString().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""},t=function(n,p){return e("<span />",{class:p,html:s(n)})},r=function(p,a){switch(e.type(p)){case"object":a||(a=0);var d=e("<span />",{class:"block"}),o=Object.keys(p).length;if(!o)return d.append(t("{","b")).append(" ").append(t("}","b"));d.append(t("{","b"));var c=e("<ul />",{class:"obj collapsible level"+a});return e.each(p,function(p,l){o--;var s=e("<li />").append(t('"',"q")).append(p).append(t('"',"q")).append(": ").append(r(l,a+1));["object","array"].indexOf(e.type(l))===-1||e.isEmptyObject(l)||s.prepend(n(window.jsonview_pre_collapsed&&a>=window.jsonview_pre_collapsed_level)),o>0&&s.append(","),c.append(s)}),d.append(c),d.append(t("...","dots")),d.append(t("}","b")),1===Object.keys(p).length?d.append(t("// 1 item","comments")):d.append(t("// "+Object.keys(p).length+" items","comments")),d;case"array":a||(a=0);var o=p.length,d=e("<span />",{class:"block"});if(!o)return d.append(t("[","b")).append(" ").append(t("]","b"));d.append(t("[","b"));var c=e("<ul />",{class:"obj collapsible level"+a});return e.each(p,function(p,l){o--;var s=e("<li />").append(r(l,a+1));["object","array"].indexOf(e.type(l))===-1||e.isEmptyObject(l)||s.prepend(n(window.jsonview_pre_collapsed&&a>=window.jsonview_pre_collapsed_level)),o>0&&s.append(","),c.append(s)}),d.append(c),d.append(t("...","dots")),d.append(t("]","b")),1===p.length?d.append(t("// 1 item","comments")):d.append(t("// "+p.length+" items","comments")),d;case"string":if(p=s(p),/^(http|https|file):\/\/[^\s]+$/i.test(p))return e("<span />").append(t('"',"q")).append(e("<a />",{href:p,text:p})).append(t('"',"q"));if(l.nl2br){var i=/\n/g;i.test(p)&&(p=(p+"").replace(i,"<br />"))}var u=e("<span />",{class:"str"}).html(p);return e("<span />").append(t('"',"q")).append(u).append(t('"',"q"));case"number":return t(p.toString(),"num");case"undefined":return t("undefined","undef");case"null":return t("null","null");case"boolean":return t(p?"true":"false","bool")}};return r(p)};return e.fn.jsonView=function(n,a){var l=e(this);if("undefined"==typeof window.jsonview_pre_collapsed&&(window.jsonview_pre_collapsed=!0),"undefined"==typeof window.jsonview_pre_collapsed_level&&(window.jsonview_pre_collapsed_level=0),a=e.extend({},{nl2br:!0},a),"string"==typeof n)try{n=JSON.parse(n)}catch(e){}var s="json-view";return window.jsonview_pre_collapsed&&(s+=window.jsonview_pre_collapsed_level>0?" pre-collapsed-level-"+window.jsonview_pre_collapsed_level:" pre-collapsed"),l.append(e("<div />",{class:s}).append(p(n,a))),l}}(jQuery);